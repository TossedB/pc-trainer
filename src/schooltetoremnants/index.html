<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="rotationSystem.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<style>
    @font-face { font-family: Muro; src: url('Muroslant.otf'); } 
    .queue{
        text-align: center;
        font-family: Muro;
        font-size: 28px;
        letter-spacing: 2px;
    }
    canvas{
        vertical-align: top;
    }
</style>
<head>
    <title>SchoolTeto</title>
</head>
<body style="background-color:#222; color: #FFF;">

    <button target="popup" onclick="">Game Settings</button>
</body>
<script>

var imgs = {
    grid: './grid.png',
}

const a = {t:0,c:""} // t:0 = nothing   t:1 = heap mino   t:2 = current mino   t:3 = ghost mino
const aRow = function() { return '.'.repeat(boardSize[0]).split('').map(()=>{return a}) }


// setting up board context
var ctxMatrix  = document.getElementById("b").getContext("2d")
var ctxHold = document.getElementById("h").getContext("2d")
var ctxNext = document.getElementById("n").getContext("2d")

// drawing the board i think?



function callback() {
    pieces = SRSX.pieces
    kicks = SRSX.kicks

    // document.addEventListener("keydown", function(e) {
    //     if(e.repeat) return;
        // switch(input) {
        //     case 'RE': // Restart
        //         board = []
        //         for (let i = 0; i < boardSize[1]; i++) {board.push(aRow())}
        //         xPOS = spawn[0]
        //         yPOS = spawn[1]
        //         xGHO = spawn[0]
        //         yGHO = spawn[1]
        //         newPiece()
        //         break;
        // }
    // })

    setInterval(() => {
        move('SD')
    }, 700)

    // function playSnd(sfx,overlap) {
    //     if(sfxCache[sfx] && !overlap) return sfxCache[sfx].play()
    //     var s = new Audio(`sfx/${sfx}.wav`)
    //     sfxCache[sfx] = s
    //     s.play()
    // }

    // function softDrop(id) {
    //     if(SDR) {
    //         var loop = setInterval(function(a) {
    //             if(sdID==id) {
    //                 move('SD')
    //             } else {clearInterval(loop)}
    //         }, SDR)
    //     } else { // SDR is 0ms = instant SD
    //         var loop = setInterval(() => {
    //             if(sdID==id) {
    //                 yPOS=yGHO
    //                 clearActive()
    //                 setShape()
    //             } else {clearInterval(loop)}
    //         }, 0)
            
    //     }
    // }

    // function hardDrop() {
    //     yPOS = yGHO
    //     held = false
    //     playSnd('HardDrop',true)
    //     setShape(true)
    //     clearActive()
    //     checkLines()
    //     newPiece()
    // }

    function newPiece() {
        // xPOS = spawn[0]
        // yPOS = spawn[1]
        // rot = 0
        // piece = queue.shift()
        // updateQueue()
        // updateGhost()
        // setShape()
    }

    setInterval(() => {
        render()
    }, 0);
}
</script>
